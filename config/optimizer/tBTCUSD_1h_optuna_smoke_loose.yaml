meta:
  symbol: tBTCUSD
  timeframe: 1h
  snapshot_id: tBTCUSD_1h_2024-10-22_2025-10-01_v1
  warmup_bars: 150
  runs:
    strategy: optuna
    max_trials: 100
    max_concurrent: 4
    resume: false
    use_sample_range: true
    sample_start: 2024-10-22
    sample_end: 2025-10-01
    optuna:
      storage: sqlite:///results/hparam_search/storage/optuna_smoke_loose_20251111_111059.db
      study_name: smoke_loose_20251111_111059
      sampler:
        name: tpe
        kwargs:
          n_startup_trials: 50
          n_ei_candidates: 512
          constant_liar: true
          multivariate: true
      pruner:
        name: median
        kwargs: {}
      heartbeat_interval: 60
      heartbeat_grace_period: 180
      timeout_seconds: 3600

constraints:
  min_trades: 1
  min_profit_factor: 0.0
  max_max_dd: 1.0
  include_scoring_failures: false

parameters:
  thresholds:
    entry_conf_overall:
      type: float
      low: 0.20
      high: 0.50
      step: 0.02
    regime_proba:
      type: fixed
      value:
        balanced: 0.30
        bull: 0.30
        bear: 0.30
        ranging: 0.30
    min_edge:
      type: fixed
      value: 0.0
    signal_adaptation:
      type: fixed
      value:
        atr_period: 14
        zones:
          low:
            entry_conf_overall: 0.28
            regime_proba:
              { ranging: 0.30, bull: 0.30, bear: 0.30, balanced: 0.30 }
          mid:
            entry_conf_overall: 0.32
            regime_proba:
              { ranging: 0.30, bull: 0.30, bear: 0.30, balanced: 0.30 }
          high:
            entry_conf_overall: 0.36
            regime_proba:
              { ranging: 0.30, bull: 0.30, bear: 0.30, balanced: 0.30 }
  gates:
    hysteresis_steps:
      type: fixed
      value: 0
  risk:
    risk_map:
      type: grid
      values:
        - - - 0.40
            - 0.005
          - - 0.45
            - 0.010
          - - 0.50
            - 0.015
          - - 0.55
            - 0.020
          - - 0.60
            - 0.025
          - - 0.65
            - 0.030
  exit:
    exit_conf_threshold:
      type: float
      low: 0.30
      high: 0.60
      step: 0.02
    max_hold_bars:
      type: grid
      values: [18, 20]
  htf_exit_config:
    fib_threshold_atr:
      type: float
      low: 0.55
      high: 0.80
      step: 0.05
    trail_atr_multiplier:
      type: float
      low: 1.7
      high: 2.8
      step: 0.05
    enable_partials:
      type: fixed
      value: true
    enable_trailing:
      type: fixed
      value: true
    enable_structure_breaks:
      type: fixed
      value: true
    partial_1_pct:
      type: fixed
      value: 0.6
    partial_2_pct:
      type: fixed
      value: 0.5
    swing_update_strategy:
      type: fixed
      value: fixed
  htf_fib:
    entry:
      enabled:
        type: fixed
        value: false
      missing_policy:
        type: fixed
        value: pass
      tolerance_atr:
        type: float
        low: 0.2
        high: 0.8
        step: 0.05
      long_min_level:
        type: fixed
        value: 0.382
      short_max_level:
        type: fixed
        value: 0.618
  ltf_fib:
    entry:
      enabled:
        type: fixed
        value: false
      missing_policy:
        type: fixed
        value: pass
      tolerance_atr:
        type: float
        low: 0.2
        high: 0.8
        step: 0.05
      long_max_level:
        type: float
        low: 0.764
        high: 0.872
        step: 0.012
      short_min_level:
        type: float
        low: 0.276
        high: 0.376
        step: 0.02
      override_confidence:
        enabled:
          type: fixed
          value: true
        min:
          type: float
          low: 0.30
          high: 0.55
          step: 0.025
        max:
          type: float
          low: 0.60
          high: 0.85
          step: 0.025
  multi_timeframe:
    use_htf_block:
      type: fixed
      value: false
    allow_ltf_override:
      type: fixed
      value: true
    ltf_override_threshold:
      type: float
      low: 0.55
      high: 0.80
      step: 0.01
    ltf_override_adaptive:
      enabled:
        type: fixed
        value: true
      window:
        type: int
        low: 160
        high: 320
        step: 20
      percentile:
        type: float
        low: 0.80
        high: 0.90
        step: 0.02
      min_history:
        type: fixed
        value: 120
      min_floor:
        type: float
        low: 0.45
        high: 0.65
        step: 0.05
      max_ceiling:
        type: float
        low: 0.90
        high: 0.98
        step: 0.02
      fallback_threshold:
        type: float
        low: 0.70
        high: 0.85
        step: 0.02
      regime_multipliers:
        type: fixed
        value:
          bull: 0.95
          bear: 1.05
